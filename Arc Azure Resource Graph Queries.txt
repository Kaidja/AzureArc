resources | where type == "microsoft.hybridcompute/machines"

resources | where type == "microsoft.hybridcompute/machines/extensions"

resources | where type == "microsoft.hybridcompute/machines"
| project ServerName = tostring(name)
| join kind = inner ( resources 
    | where type == "microsoft.hybridcompute/machines/extensions" 
    | extend ServerName = tostring(split(tostring(id),"/",8)[0])
    )
    on ServerName

resources | where type == "microsoft.hybridcompute/machines"
| where properties.status == "Expired"

resources | where type == "microsoft.hybridcompute/machines"
| where properties.status == "Disconnected"
